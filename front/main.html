<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cadastro</title>
  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/tempusdominus-bootstrap-4/5.0.1/css/tempusdominus-bootstrap-4.min.css" />
  <!--<link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.css') }}"> -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>

<body>
  <!-- "background-image: linear-gradient(120deg, #a1c4fd 0%, #c2e9fb 100%);" -->
  <!-- style=" background: rgb(222,221,233);
background: linear-gradient(90deg, rgba(222,221,233,1) 0%, rgba(104,104,233,1) 53%, rgba(0,212,255,1) 100%);
" -->

  <header style="margin-bottom: 50px; background-color: white">
    <ul class="nav nav-tabs">
      <li class="nav-item">
        <a class="nav-link active" href="#">Registro</a>
      </li>
      <li class="nav-item">
        <a class="nav-link option-1" href="#" onclick="Checkout()">Logout</a>
      </li>
    </ul>

    <img src="https://www.opus-software.com.br/wp-content/uploads/2018/11/devops-loop-illustrations-2.png"
      style="width: 60px;height: 25px; position: absolute; right: 10px; top: 10px;">
  </header>


  <div class="container" id="container">

    <!-- <form method="POST" action="sistemas"> -->
      <form>

      <input type="text" style="margin-bottom: 4px;" class="form-control" id="Login" aria-describedby="SeuLogin" placeholder="Digite somente o seu login (ex: Joao.uca)">

      <div class="form-group">
        <div class="card">
          <div class="card-body" id="BotaoSimNao">
            <p>Máquina(s) pode(m) desligar fora de horário padrão? (08:00h as 18:00h)</p>
            <div class="form-check">
              <input class="form-check-input" name="DesligaSimNao" type="radio" value="DesligaSim" id="defaultCheck1">
              <label class="form-check-label" for="defaultCheck1">
                Sim
              </label>
            </div>

            <div class="form-check">
              <input class="form-check-input" name="DesligaSimNao" type="radio" value="DesligaNao" id="defaultCheck2">
              <label class="form-check-label" for="defaultCheck2">
                Não
              </label>

            </div>

          </div>
        </div>
        <br>
        <select class="form-control" id="SelecNumMaqs" name="SelecNumMaq">
          <option value="" selected disabled>Quantidade de máquinas</option>
          <option>1</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5</option>
          <option>6</option>
          <option>7</option>
          <option>8</option>
          <option>9</option>
          <option>10</option>
          <option>11</option>
          <option>12</option>
          <option>13</option>
          <option>14</option>
          <option>15</option>
          <option>16 +</option>
        </select>
      </div>

    

      <select class="form-control" alt="Selecione o curso desejado" id="SelecCurso" name="SelecCurso">
        <option>NetFabril</option>
      </select>

      <br>
      <div class='col-md-13'>
        <div class="form-group">
          <div class="input-group date" id="datetimepicker7" data-target-input="nearest">
            <input type="text" required id="DateToText7" name="DataIniCurso" placeholder="Dia de início do curso"
              class="form-control datetimepicker-input" data-target="#datetimepicker7" />
            <div class="input-group-append" data-target="#datetimepicker7" data-toggle="datetimepicker">
              <div class="input-group-text"><i class="fa fa-calendar"></i></div>
            </div>
          </div>
        </div>
      </div>
    
      <div class='col-md-13'>
        <div class="form-group">
          <div class="input-group date" id="datetimepicker8" data-target-input="nearest">
            <input type="text" required id="DateToText8" name="DataFimCurso" placeholder="Dia de término do curso"
              class="form-control datetimepicker-input" data-target="#datetimepicker8" />
            <div class="input-group-append" data-target="#datetimepicker8" data-toggle="datetimepicker">
              <div class="input-group-text"><i class="fa fa-calendar"></i></div>
            </div>
          </div>
        </div>
      </div>
      <button type="button" id="Envio" class="btn btn-primary btn-lg btn-block"
        onclick="EnviaForm()">Enviar</button>
    </form>

    <script type="text/javascript">
      $(function () {
        $('#datetimepicker7').datetimepicker({
        });
        $('#datetimepicker8').datetimepicker({
          useCurrent: false
        });
        $("#datetimepicker7").on("change.datetimepicker", function (e) {
          $('#datetimepicker8').datetimepicker('minDate', e.date);

        });
        $("#datetimepicker8").on("change.datetimepicker", function (e) {
          $('#datetimepicker7').datetimepicker('maxDate', e.date);
        });
      });
    </script>
  </div>

  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js"></script>
  <script type="text/javascript"
    src="https://cdnjs.cloudflare.com/ajax/libs/tempusdominus-bootstrap-4/5.0.1/js/tempusdominus-bootstrap-4.min.js"></script>

  <script>
    function EnviaForm() {
      
      var dataInicio = document.getElementById('DateToText7').value;
      
      var agora = new Date();
      var datadousuario = new Date(dataInicio);

      console.log(agora);
      console.log(datadousuario);
      if (datadousuario - agora > 259200000) {
        console.log('ENTROU NO IF');
        alert('Não é permitida a criação de máquinas com mais de 3 dias de antecedência, retorne outro dia ou entre em contato diretamente com o setor de DEVOPS.')
      } else {

      var DesligaSimNao = document.getElementById('defaultCheck1').checked;
      if (DesligaSimNao == true) {
        var DesligaSimNao = 'DesligaSim';
      } else {
        var DesligaSimNao = 'DesligaNao';
      }
      
      var Curso = document.getElementById('SelecCurso').value;
      var Login = document.getElementById('Login').value;

      var botao = document.getElementById('Envio');
      var LoadingTile = document.getElementById('modalloading');

      LoadingTile.classList.remove('invisible');

      var container = document.getElementById('container');
      container.classList.add('opaco');

      botao.classList.add('invisible');

      var SelecNumMaq = parseInt(document.getElementById('SelecNumMaqs').value);
      
      var DataIniCurso = document.getElementById('DateToText7').value;
      var DataFimCurso = document.getElementById('DateToText8').value;
     
      $.ajax({
        type: 'POST',
        url: '{{url_for('createmachines')}}',
        data: {
          'Login': Login,
          'DesligaSimNao': DesligaSimNao,
          'SelecNumMaq': SelecNumMaq,
          'Curso': Curso,
          'DataIniCurso': DataIniCurso,
          'DataFimCurso': DataFimCurso
        },
        success: function() {
          if(!alert('Sucesso! Cheque seu e-mail em instantes.')){window.location.reload();}
        }
      });

    }
  }
  </script>
  <script>
    function Checkout() {
      window.location.href = "/logoff";
    }
  </script>

</body>

</html>